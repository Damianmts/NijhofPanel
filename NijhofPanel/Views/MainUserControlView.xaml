<UserControl x:Class="NijhofPanel.Views.MainUserControlView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:views="clr-namespace:NijhofPanel.Views"
             xmlns:viewModel="clr-namespace:NijhofPanel.ViewModels"
             xmlns:services="clr-namespace:NijhofPanel.UI.Controls.Navigation"
             xmlns:local="clr-namespace:NijhofPanel.Views.Converters"
             mc:Ignorable="d"
             d:DataContext="{d:DesignInstance viewModel:MainUserControlViewModel, IsDesignTimeCreatable=True}"
             Background="{DynamicResource CurrentBackgroundColor}"
             Height="700"
             Width="330"
             MinHeight="700"
             MinWidth="330">

    <!-- To Do -->
    <!-- TODO - Fix/ Make Dark Mode -->

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary
                    Source="pack://application:,,,/NijhofPanel;component/Resources/Icons/IconsVectorSidebar.xaml" />
                <ResourceDictionary
                    Source="pack://application:,,,/NijhofPanel;component/Resources/Icons/IconsVectorETools.xaml" />
                <ResourceDictionary
                    Source="pack://application:,,,/NijhofPanel;component/UI/Themes/Base/CoreTheme.xaml" />
                <ResourceDictionary
                    Source="pack://application:,,,/NijhofPanel;component/UI/Themes/Layout/Sidebar.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <SolidColorBrush x:Key="CurrentBackgroundColor"
                             Color="{Binding Color, Source={StaticResource BackgroundColor_Light}}" />

            <local:BooleanToColumnConverter x:Key="BoolToColumnConverter" />
            <local:BooleanToColumnSpanConverter x:Key="BoolToColumnSpanConverter" />
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="50" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <!-- Sidebar met Visibility binding -->
        <Border Grid.Column="0"
                BorderThickness="0,0,1,0"
                BorderBrush="LightGray"
                Visibility="{Binding SidebarVisibility, RelativeSource={RelativeSource AncestorType=UserControl}}">
            <DockPanel LastChildFill="False">
                <ListBox x:Name="Sidebar"
                         DockPanel.Dock="Top"
                         BorderThickness="0"
                         Background="Transparent"
                         HorizontalContentAlignment="Center">
                    <services:NavButton ViewType="{x:Type views:StartPageView}"
                                        Icon="{StaticResource HomeIcon}" MouseLeftButtonUp="NavButton_Click" />
                    <Separator /><Separator />
                    <services:NavButton ViewType="{x:Type views:ToolsPageView}"
                                        Icon="{StaticResource WToolsIcon}" MouseLeftButtonUp="NavButton_Click" />
                    <Separator />
                    <services:NavButton ViewType="{x:Type views:ElectricalPageView}"
                                        Icon="{StaticResource EToolsIcon}" MouseLeftButtonUp="NavButton_Click" />
                    <Separator /><Separator />
                    <services:WindowButton Navlink="LibraryWindowView" Icon="{StaticResource LibraryIcon}"
                                           MouseLeftButtonUp="WindowButton_Click" />
                    <Separator />
                    <services:WindowButton Navlink="PrefabWindowView" Icon="{StaticResource PrefabIcon}"
                                           MouseLeftButtonUp="WindowButton_Click" />
                    <Separator />
                    <services:WindowButton Navlink="FittingListWindowView" Icon="{StaticResource FittingsIcon}"
                                           MouseLeftButtonUp="WindowButton_Click" />
                    <Separator />
                    <services:WindowButton Navlink="SawListWindowView" Icon="{StaticResource SawIcon}"
                                           MouseLeftButtonUp="WindowButton_Click" />
                </ListBox>

                <ListBox x:Name="SidebarBottom"
                         DockPanel.Dock="Bottom"
                         BorderThickness="0"
                         Background="Transparent"
                         HorizontalContentAlignment="Center">
                    <Separator /><Separator />
                    <services:NavButton 
                                        Icon="{StaticResource DarkModeIcon}" />
                    <Separator />
                    <services:NavButton ViewType="{x:Type views:UserPageView}"
                                        Icon="{StaticResource UserIcon}" MouseLeftButtonUp="NavButton_Click" />
                    <Separator />
                    <services:NavButton ViewType="{x:Type views:SettingsPageView}"
                                        Icon="{StaticResource SettingsIcon}" MouseLeftButtonUp="NavButton_Click" />
                </ListBox>
            </DockPanel>
        </Border>

        <!-- Frame met ColumnSpan binding -->
        <Frame x:Name="NavigationFrame"
               x:FieldModifier="public"
               Grid.Column="{Binding DataContext.IsLoggedIn,
                             RelativeSource={RelativeSource AncestorType=UserControl},
                             Converter={StaticResource BoolToColumnConverter}}"
               Grid.ColumnSpan="{Binding DataContext.IsLoggedIn,
                                  RelativeSource={RelativeSource AncestorType=UserControl},
                                  Converter={StaticResource BoolToColumnSpanConverter}}"
               NavigationUIVisibility="Hidden"
               Background="#e9ecef" />

    </Grid>
</UserControl>